<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farm Management Dashboard</title>
  <style>
    /* Basic responsive design */
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background-color: #f4f4f4;
}

nav {
    background-color: #4CAF50;
    color: white;
    padding: 10px;
}

nav ul {
    display: flex;
    justify-content: space-around;
    list-style-type: none;
    padding: 0;
}

.dashboard {
    max-width: 1200px;
    margin: 20px auto;
    padding: 20px;
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.dashboard section {
    margin: 20px 0;
    padding: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #fafafa;
}

button {
    margin: 10px;
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

button:hover {
    background-color: #45a049;
}

/* Hide all sections by default */
.hidden {
    display: none;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    nav ul {
        flex-direction: column;
        align-items: center;
    }

    .dashboard section {
        margin: 10px;
        padding: 15px;
    }
}
/* Dropdown styles */
.dropdown-content {
    display: none; /* Hidden by default */
    position: absolute;
    background-color: #f9f9f9;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
    z-index: 1;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
}

.dropdown-content a:hover {
    background-color: #f1f1f1;
}
/* Dropdown Styles */
.settings-menu {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: none;
    position: absolute;
    background-color: white;
    min-width: 160px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    z-index: 1;
}

.dropdown-content a,
.dropdown-content button {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
    border: none;
    background: none;
    cursor: pointer;
}

.dropdown-content a:hover,
.dropdown-content button:hover {
    background-color: #ddd;
}

.show {
    display: block;
}

/* Modal Styles */
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

.modal-content {
    background-color: #fefefe;
    margin: 15% auto; /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 80%; /* Could be more or less, depending on screen size */
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}

/* Weather Forecast Cards Container */
#weatherForecastCards {
    display: flex;
    flex-wrap: wrap;
    gap: 20px; /* Space between cards */
    margin-top: 20px; /* Space above the cards */
}

/* Weather Card Style */
.weather-card {
    background-color: #f9f9f9; /* Light background for cards */
    border: 1px solid #ddd; /* Light gray border */
    border-radius: 8px; /* Rounded corners */
    padding: 15px; /* Inner padding */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Subtle shadow */
    width: 250px; /* Fixed width for cards */
    transition: transform 0.2s; /* Smooth scaling effect */
}

/* Card Hover Effect */
.weather-card:hover {
    transform: scale(1.02); /* Slightly scale up on hover */
}

/* Card Title */
.weather-card h4 {
    margin: 0 0 10px; /* Margin below the title */
    font-size: 1.25em; /* Font size for the title */
    color: #333; /* Darker color for the title */
}

/* Card Content */
.weather-card p {
    margin: 5px 0; /* Margin for paragraphs */
    font-size: 0.9em; /* Smaller font size for content */
    color: #555; /* Gray color for text */
}

/* Highlighting Important Data */
.weather-card strong {
    color: #2c3e50; /* Dark blue for strong text */
}

  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav>
    <div class="logo">Farm Manager</div>
    <ul>
      <li><button class="toggle-button" onclick="showSection('home')">Home</button></li>
      <li><button class="toggle-button" onclick="showSection('fieldDataInput')">Field Data Input</button></li>
      <li><button class="toggle-button" onclick="showSection('pestManagement')">Pest Management</button></li>
      <li><button class="toggle-button" onclick="showSection('cropManuals')">Crop Manuals</button></li>
      <li><button class="toggle-button" onclick="showSection('farmManagement')">Farm Management</button></li>
      <li><button class="toggle-button" onclick="showSection('settings')">Settings</button></li>
          </ul>
  </nav>

  <!-- Main Dashboard Section -->
  <div class="dashboard">

    <section id="home" class="hidden">
        <h2>Home</h2>
        <h2>Welcome to the Farm Management System</h2>
        <p>Select a section to start managing your farm data.</p>
        <div>
            <h3>Farming Tips</h3>
            <button class="toggle-button" onclick="toggleSection('farmingTips')">Farming Tips</button>
            <div id="farmingTips" class="toggle-content" style="display:none;">
                <label for="cropSelect">Select Crop:</label>
                <select id="cropSelect" onchange="showTipsForSelectedCrop()">
                    <option value="">--Select a Crop--</option>
                    <option value="maize">Maize</option>
                    <option value="beans">Beans</option>
                    <option value="tomatoes">Tomatoes</option>
                </select>
                <button onclick="showTipsForSelectedCrop()">Show Tips</button>
                <ul id="specificTips"></ul> <!-- Tips will be displayed here -->
            </div>
        </div>

        <button class="toggle-button" onclick="toggleSection('marketPrice')">Market Price Prediction</button>
            <div id="marketPrice" class="toggle-content" style="display:none;">
                <h3>Market Price Prediction</h3>
        
                <!-- Select Region Dropdown -->
                <label for="locationSelect">Select Region:</label>
                <select id="locationSelect" onchange="updateMarkets()">
                    <option value="">--Select Region--</option>
                    <option value="Nairobi">Nairobi</option>
                    <option value="Coast">Coast</option>
                    <option value="Lake">Lake</option>
                    <option value="Rift Valley">Rift Valley</option>
                    <option value="Central">Central</option>
                    <option value="Eastern">Eastern</option>
                </select>
        
                <!-- Custom Market Input -->
                <label for="customMarket">Enter Market:</label>
                <input type="text" id="customMarket" placeholder="Enter your market" oninput="updateCropTypes()">
        
                <!-- Crop Type Selection -->
                <label for="cropTypeSelect">Select Crop Type:</label>
                <select id="cropTypeSelect" onchange="showRetailPrice()">
                    <option value="">--Select Crop Type--</option>
                    <option value="Maize">Maize</option>
                    <option value="Beans">Beans</option>
                    <option value="Potatoes">Potatoes</option>
                    <option value="Tomatoes">Tomatoes</option>
                </select>
        
                <!-- Display Predicted Market Price -->
                <button onclick="showRetailPrice()">Show Retail Price</button>
                <h4 id="retailPriceDisplay">Predicted Market Price: </h4>
        
                <!-- User Entered Retail Price -->
                <label for="userRetailPrice">Enter Your Retail Price (Ksh per kg):</label>
                <input type="number" id="userRetailPrice" placeholder="Enter retail price" oninput="updateRetailPrice()">
        
                <!-- Display User Entered Price for Comparison -->
                <h4 id="userRetailPriceDisplay">Your Retail Price: </h4>
            </div>
        </section>

        
    <!-- Field Data Input Section -->
    <section id="fieldDataInput" class="hidden">
      <h2>Field Data Input</h2>
      <form class="field-data-input">
        <h3>Field Data Input</h3>

        <!-- Type of Crop Grown Dropdown -->
        <label for="crop-type">Type of Crop Grown:</label>
        <select id="crop-type" name="crop-type" required>
          <option value="">Select a Crop</option>
          <option value="maize">Maize</option>
          <option value="beans">Beans</option>
          <option value="castor">Castor</option>
          <option value="cauliflower">Cauliflower</option>
          <option value="eggplant">Eggplant</option>
          <option value="green grams">Green Grams</option>
          <option value="green pepper">Green Pepper</option>
          <option value="tomatoes">Tomatoes</option>
          <option value="onions">Onions</option>
          <option value="zucchini">Zucchini</option>
          <option value="carrots">Carrots</option>
        </select><br><br>

        <!-- Crop Stage Data Dropdown -->
        <label for="crop-stage">Crop Stage Data:</label>
        <select id="crop-stage" name="crop-stage" required>
          <option value="">Select Crop Stage</option>
          <option value="ep">Emergence/Planting</option>
          <option value="propagation">Propagation</option>
          <option value="transplanting">Transplanting</option>
          <option value="germination">Germination</option>
          <option value="weeding 1st split">Weeding (1st Split)</option>
          <option value="weeding 2nd split">Weeding (2nd Split)</option>
          <option value="flowering">Flowering</option>
          <option value="fruiting">Fruiting</option>
          <option value="podding">Podding</option>
          <option value="harvesting">Harvesting</option>
          <option value="post-harvest">Post-Harvest</option>
        </select><br><br>

        <label for="spacing">Spacing of Crops (in cm):</label>
        <input type="number" id="spacing" name="spacing" placeholder="Enter spacing between crops" min="0" step="0.1" required><br><br>

        <!-- Macro Nutrients (NPK values) -->
        <h3>Macro Nutrients (N-P-K Values)</h3>
        <label for="nitrogen">Nitrogen (N) Level (%):</label>
        <input type="number" id="nitrogen" name="nitrogen" placeholder="Enter Nitrogen value" min="0" max="100" step="0.1" required><br><br>

        <label for="phosphorus">Phosphorus (P) Level (%):</label>
        <input type="number" id="phosphorus" name="phosphorus" placeholder="Enter Phosphorus value" min="0" max="100" step="0.1" required><br><br>

        <label for="potassium">Potassium (K) Level (%):</label>
        <input type="number" id="potassium" name="potassium" placeholder="Enter Potassium value" min="0" max="100" step="0.1" required><br><br>

        <!-- Micro Nutrients -->
        <h3>Micro Nutrients</h3>
        <label for="micro-nutrients">Other Essential Nutrients (e.g., Iron, Magnesium):</label>
        <textarea id="micro-nutrients" name="micro-nutrients" placeholder="List micro nutrients" aria-describedby="micro-nutrients-help"></textarea>
        <small id="micro-nutrients-help">List essential nutrients like Iron, Magnesium, etc.</small><br><br>

        <!-- Intervention Used -->
        <h3>Intervention Used</h3>
        <label for="intervention-used">Intervention Used:</label>
        <select id="intervention-used" name="intervention-used" required>
            <option value="">Select an Intervention</option>
            <option value="fertilizer">Fertilizer</option>
            <option value="manure">Manure</option>
            <option value="pesticide">Pesticide</option>
            <option value="herbicide">Herbicide</option>
            <option value="other">Other</option>
        </select><br><br>

        <label for="quantity-used">Quantity Used (per acre):</label>
        <input type="number" id="quantity-used" name="quantity-used" placeholder="Enter quantity (kg/litres)" min="0" step="0.1" required><br><br>

        <!-- Weather Forecast -->
        <h3>Weather Forecast</h3>
        <label for="weather">Forecasted Weather:</label>
        <select id="weather" name="weather" required>
            <option value="sunny">Sunny</option>
            <option value="rainy">Rainy</option>
            <option value="windy">Windy</option>
            <option value="cloudy">Cloudy</option>
        </select><br><br>

 <!-- Weather Forecast Cards -->
<div id="weatherForecastCards">
    <!-- Sample card structure -->
    <div class="weather-card">
        <h3>Weather Forecast</h3>
         <!-- Date Display -->
         <div id="forecastDate" class="forecast-date"></div>
        <label for="weatherLocation">Enter Location:</label>
        <input type="text" id="weatherLocation" placeholder="City, e.g., Nairobi">
        <button onclick="getWeatherForecast()">Get Weather Forecast</button>
        
        <!-- Display Weather Forecast Here -->
        <div id="weatherDisplay"></div>
        
    <!-- More cards will be populated dynamically -->
</div>

        <button type="submit">Submit Crop Data</button>
    </form>
</section>

     <!-- Pest Management Section -->
    <section id="pestManagement" class="hidden">
      <h2>Pest Management</h2>
      <form class="pest-management" id="pest-form">

        <!-- Type of Crop Grown Dropdown -->
        <h3>Crop Name</h3>
        <label for="pest-crop-type">Type of Crop:</label>
        <select id="pest-crop-type" name="pest-crop-type" required>
          <option value="">Select a Crop</option>
          <option value="maize">Maize</option>
          <option value="beans">Beans</option>
          <option value="castor">Castor</option>
          <option value="cauliflower">Cauliflower</option>
          <option value="eggplant">Eggplant</option>
          <option value="green grams">Green Grams</option>
          <option value="green pepper">Green Pepper</option>
          <option value="tomatoes">Tomatoes</option>
          <option value="onions">Onions</option>
          <option value="zucchini">Zucchini</option>
          <option value="carrots">Carrots</option>
        </select><br><br>

        <!-- Crop Stage Data Dropdown -->
        <h3>Crop Stage</h3>
        <label for="pest-crop-stage">Crop Stage When Pest Was Detected:</label>
        <select id="pest-crop-stage" name="pest-crop-stage" required>
          <option value="">Select Crop Stage</option>
          <option value="ep">Emergence/Planting</option>
          <option value="propagation">Propagation</option>
          <option value="transplanting">Transplanting</option>
          <option value="germination">Germination</option>
          <option value="weeding 1st split">Weeding (1st Split)</option>
          <option value="weeding 2nd split">Weeding (2nd Split)</option>
          <option value="flowering">Flowering</option>
          <option value="fruiting">Fruiting</option>
          <option value="podding">Podding</option>
          <option value="harvesting">Harvesting</option>
          <option value="post-harvest">Post-Harvest</option>
        </select><br><br>

      <!-- Pest and Disease Picture Upload -->
<h3>Pest/Disease Picture</h3>
<label for="pestDiseasePicture">Upload Picture of Pest or Disease:</label>
<input type="file" id="pestDiseasePicture" name="pestDiseasePicture" accept="image/*" required aria-label="Upload a picture of the pest or disease"><br><br>

<!-- Disease and Pest Identification will be autofilled -->
<h3>Pest/Disease Type</h3>
<label for="pest-disease-type">Identified Pest/Disease Type:</label>
<input type="text" id="pest-disease-type" name="pest-disease-type" placeholder="Pest or disease type will be auto-detected"><br><br>

<!-- Button to Trigger Identification -->
<button type="button" onclick="identifyPestDisease()">Identify Pest/Disease</button><br><br>

<!-- Monitoring -->
<h3>Monitoring </h3>
<label for="monitoring-details">Monitoring Details:</label>
<textarea id="monitoring-details" name="monitoring-details" placeholder="Describe monitoring actions (e.g., traps, scouting)" required></textarea><br><br>

<!-- Prevention Strategies -->
<h3>Prevention Strategies</h3>
<label for="prevention-strategies">Prevention Strategies (Examples: Crop Rotation, Sanitation, Physical Barriers):</label>
<textarea id="prevention-strategies" name="prevention-strategies" placeholder="Examples:
- Crop Rotation: Regularly change crop types to reduce specific pest and disease populations.
- Sanitation: Clean equipment, tools, and machinery to prevent pest and disease spread.
- Resistant Varieties: Use pest and disease-resistant crop varieties.
- Healthy Soil: Improve soil health through organic matter, compost, and proper nutrients.
- Physical Barriers: Use mulches, cover crops, or fences to suppress weeds and pests." required></textarea><br><br>

<!-- Intervention Used -->
<h3>Intervention Used</h3>
<label for="intervention-used">Intervention Used (Examples: Biological, Mechanical, Chemical):</label>
<textarea id="intervention-used" name="intervention-used" placeholder="Examples:
- Biological: Use natural enemies (e.g., predators, parasites, pathogens) to control pests.
- Mechanical: Hand-pulling diseased leaves or stems, mowing, tilling, traps, and mechanical removal of pests.
- Chemical: Apply selective herbicides for weeds or pesticides for pest control. Use bio-pesticides or organic alternatives when possible." required></textarea><br><br>

<!-- Dosage Required -->
<h3>Dosage Required</h3>
<label for="dosage-required">Dosage Required (e.g., liters, kg):</label>
<input type="text" id="dosage-required" name="dosage-required" placeholder="Enter dosage required" required><br><br>

<!-- Control Effectiveness Evaluation -->
<h3>Effectiveness Evaluation</h3>
<label for="effectiveness-evaluation">Effectiveness of Control Measure:</label>
<textarea id="effectiveness-evaluation" name="effectiveness-evaluation" placeholder="Evaluate the effectiveness of the intervention used (e.g., did it significantly reduce the pest or weed population?)" required></textarea><br><br>

<!-- Future Adaptation -->
<h3>Future Adaptation</h3>
<label for="future-adaptation">Adaptation Plans:</label>
<textarea id="future-adaptation" name="future-adaptation" placeholder="Describe how you plan to adapt based on the results. Example: If mechanical removal was insufficient, consider combining it with biological control next time." required></textarea><br><br>

<button type="submit">Submit</button>

      </form>
    </section>

    <!-- Crop Manuals Section -->
    <section id="cropManuals" class="hidden">
      <h2>Crop Manuals</h2>
      <p>Loading cropManuals data...</p>
      <!-- Future implementation for displaying cropManuals -->
    </section>

    <!-- Farm Management Section -->
    <section id="farmManagement" class="hidden">
      <h2>Farm Management</h2>
      <form class="farm-management">

        <!-- Type of Crop Grown Dropdown -->
        <h3>Crop Grown</h3>
        <label for="crop-type">Type of Crop Grown:</label>
        <select id="crop-type" name="crop-type" required>
          <option value="">Select a Crop</option>
          <option value="maize">Maize</option>
          <option value="beans">Beans</option>
          <option value="castor">Castor</option>
          <option value="cauliflower">Cauliflower</option>
          <option value="eggplant">Eggplant</option>
          <option value="green grams">Green Grams</option>
          <option value="green pepper">Green Pepper</option>
          <option value="tomatoes">Tomatoes</option>
          <option value="onions">Onions</option>
          <option value="zucchini">Zucchini</option>
          <option value="carrots">Carrots</option>
        </select><br><br>

        <!-- Crop Stage Data Dropdown -->
        <h3>Crop Stage</h3>
        <label for="crop-stage">Crop Stage Data:</label>
        <select id="crop-stage" name="crop-stage" required>
          <option value="">Select Crop Stage</option>
          <option value="ep">Emergence/Planting</option>
          <option value="propagation">Propagation</option>
          <option value="transplanting">Transplanting</option>
          <option value="germination">Germination</option>
          <option value="weeding 1st split">Weeding (1st Split)</option>
          <option value="weeding 2nd split">Weeding (2nd Split)</option>
          <option value="flowering">Flowering</option>
          <option value="fruiting">Fruiting</option>
          <option value="podding">Podding</option>
          <option value="harvesting">Harvesting</option>
          <option value="post-harvest">Post-Harvest</option>
        </select><br><br>

        <!-- Total Area of Land -->
        <h3>Total Area of Land</h3>
        <label for="land-area">Total Area (in SQm):</label>
        <input type="number" id="land-area" name="land-area" placeholder="Enter total land area" min="0" step="0.1" required><br><br>

        <!-- Labour Management -->
        <h3>Labour Activity & Costs</h3>
        <label for="labour-activity">Labour Activity:</label>
        <input type="text" id="labour-activity" name="labour-activity" placeholder="Describe labour activity" required><br><br>

        <label for="labour-cost">Cost of Labour Activity (KSH):</label>
        <input type="number" id="labour-cost" name="labour-cost" placeholder="Enter cost of activity" min="0" step="0.01" required><br><br>

         <!-- Button to add more activities -->
         <button type="button" id="add-activity-btn">Add Another Labour Activity</button><br><br>

        <!-- Equipment/Input/Man-hours Used -->
        <h3>Mechanical Equipment/Input/Man-hours</h3>
        <label for="mechanical-equipment-used">Mechanical Equipment Used:</label>
        <input type="text" id="mechanical-equipment-used" name="mechanical-equipment-used" placeholder="List mechanical equipment used"><br><br>
         
        <label for="input-used">Input Used (e.g., Fertilizers, Seeds):</label>
        <textarea id="input-used" name="input-used" placeholder="List input used"></textarea><br><br>
        <label for="input-cost">Cost of Input Used (KSH):</label>
        <input type="number" id="input-cost" name="input-cost" placeholder="Enter cost of inputs" min="0" step="0.01" required><br><br>

        <label for="man-hours">Man-hours Used:</label>
        <input type="number" id="man-hours" name="man-hours" placeholder="Enter man-hours used" min="0" step="1" required><br><br>
         <label for="man-hours-cost">Cost of Man-hours Used (KSH):</label>
        <input type="number" id="man-hours-cost" name="man-hours-cost" placeholder="Enter cost of man-hours" min="0" step="0.01" required><br><br>

        <!-- Cost of Production -->
        <h3>Cost of Production</h3>
        <label for="cost-production">Cost of Production (KSH):</label>
        <input type="number" id="cost-production" name="cost-production" placeholder="Enter total cost of production" min="0" step="0.01" required><br><br>

        <!-- Market Price -->
        <h3>Market Price</h3>
        <label for="market-price">Market Price (KSH per kg):</label>
        <input type="number" id="market-price" name="market-price" placeholder="Enter market price per unit" min="0" step="0.01" required><br><br>

        <label for="total-units">Total Units Produced:</label>
        <input type="number" id="total-units" name="total-units" placeholder="Enter total units produced" min="0" step="1" required><br><br>

        <!-- Profit or Loss -->
        <h3>Profit or Loss</h3>
        <label for="revenue">Revenue (KSH):</label>
        <input type="number" id="revenue" name="revenue" placeholder="Calculated Revenue" readonly><br><br>

        <label for="profit-loss">Profit or Loss (KSH):</label>
        <input type="number" id="profit-loss" name="profit-loss" placeholder="Calculated Profit or Loss" readonly><br><br>

        <button type="button" onclick="calculateProfitLoss()">Calculate Profit or Loss</button>

        <h3>Loan Management</h3>
<!-- Loan Amount Input -->
<label for="loan-amount">Loan Amount Taken (KSH):</label>
<input type="number" id="loan-amount" name="loan-amount" placeholder="Enter loan amount taken" min="0" step="0.01" required><br><br>

<!-- Interest Rate Input -->
<label for="interest-rate">Interest Rate (%):</label>
<input type="number" id="interest-rate" name="interest-rate" placeholder="Enter interest rate (%)" min="0" step="0.01" required oninput="calculateLoanInterest()"><br><br>

<!-- Calculated Loan Interest -->
<label for="loan-interest">Calculated Loan Interest (KSH):</label>
<input type="number" id="loan-interest" name="loan-interest" placeholder="Calculated loan interest" readonly><br><br>

<!-- Total Repayment Amount -->
<label for="loan-repayment">Total Repayment Amount (KSH):</label>
<input type="number" id="loan-repayment" name="loan-repayment" placeholder="Total repayment amount" readonly><br><br>

<!-- Partial Payment Section -->
<h3>Partial Loan Payments</h3>

<!-- Payment Amount Input -->
<label for="payment-amount">Payment Amount (KSH):</label>
<input type="number" id="payment-amount" name="payment-amount" placeholder="Enter payment amount" min="0" step="0.01"><br><br>

<!-- Payment Date Input -->
<label for="payment-date">Date Paid:</label>
<input type="date" id="payment-date" name="payment-date"><br><br>

<button type="button" onclick="recordPayment()">Record Payment</button><br><br>

<!-- Remaining Loan Balance -->
<h4>Remaining Loan Balance (KSH):</h4>
<input type="number" id="remaining-balance" name="remaining-balance" readonly><br><br>

<!-- Payment History Table -->
<h4>Payment History</h4>
<table border="1">
    <thead>
        <tr>
            <th>Payment Date</th>
            <th>Payment Amount (KSH)</th>
            <th>Remaining Balance (KSH)</th>
        </tr>
    </thead>
    <tbody id="payment-history"></tbody>
</table>
<button type="submit">Submit</button>
</section>

<section id="settings" class="hidden">
    <nav>
        <h2>Settings</h2>
        <div class="settings-menu">
            <button class="settings-button" onclick="toggleDropdown()">Settings</button>
            <div class="dropdown-content" id="dropdownContent">
                <a href="#" onclick="openModal('feedbackModal')">Feedback</a>
                <a href="#" onclick="openModal('helpModal')">Help</a>
                <a href="#" onclick="openModal('aboutModal')">About</a>
                <a href="#" onclick="openModal('accountSettingsModal')">Account Settings</a>
                <a href="#" onclick="openModal('notificationsModal')">Notifications</a>
                <a href="#" onclick="openModal('privacyPolicyModal')">Privacy Policy</a>
                <a href="#" onclick="openModal('termsModal')">Terms of Service</a>
                <button id="logout-button" onclick="logout()">Log Out</button> <!-- Log Out integrated here -->
            </div>
        </div>
    </nav>

    <!-- Modal for Feedback -->
    <div id="feedbackModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('feedbackModal')">&times;</span>
            <h2>Feedback</h2>
            <p>Your feedback is important to us. Please share your thoughts or suggestions below:</p>
            <label><textarea rows="4" placeholder="Enter your feedback here..."></textarea></label>
            <button type="submit">Submit Feedback</button>
        </div>
    </div>

    <!-- Modal for Help -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('helpModal')">&times;</span>
            <h2>Help</h2>
            <p>If you need assistance, please contact our support team at <a href="mailto:support@kilimomkononi.com">support@kilimomkononi.com</a>.</p>
            <p>You can also visit our <a href="#">FAQ</a> page for more information.</p>
        </div>
    </div>

    <!-- Modal for About -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('aboutModal')">&times;</span>
            <h2>About Us</h2>
            <p>Kilimo Mkononi is dedicated to empowering farmers through technology and resources to enhance agricultural productivity.</p>
            <p>Our mission is to provide reliable information and tools to help farmers succeed.</p>
        </div>
    </div>

    <!-- Modal for Account Settings -->
    <div id="accountSettingsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('accountSettingsModal')">&times;</span>
            <h2>Account Settings</h2>
            <p>Here you can manage your account settings, including your profile information and preferences.</p>
            <label for="username">Username:</label>
            <input type="text" id="username" placeholder="Enter your username">
            <label for="email">Email:</label>
            <input type="email" id="email" placeholder="Enter your email">
            <button type="submit">Save Changes</button>
        </div>
    </div>

    <!-- Modal for Notifications -->
    <div id="notificationsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('notificationsModal')">&times;</span>
            <h2>Notifications</h2>
            <p>You can manage your notification preferences here. Choose how you'd like to be notified:</p>
            <label><input type="checkbox" checked> Email Notifications</label><br>
            <label><input type="checkbox"> SMS Notifications</label><br>
            <button type="submit">Save Preferences</button>
        </div>
    </div>

    <!-- Modal for Privacy Policy -->
    <div id="privacyPolicyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('privacyPolicyModal')">&times;</span>
            <h2>Privacy Policy</h2>
            <p>Your privacy is important to us. Please review our privacy policy for information on how we collect, use, and protect your personal information.</p>
            <p><a href="#">View Full Privacy Policy</a></p>
        </div>
    </div>

    <!-- Modal for Terms of Service -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('termsModal')">&times;</span>
            <h2>Terms of Service</h2>
            <p>By using our services, you agree to comply with our terms of service. Please read these terms carefully.</p>
            <p><a href="#">View Full Terms of Service</a></p>
        </div>
    </div>
</section>
</div>

  <!-- Footer Section -->
<footer>
    <p>&copy; 2024 FARM MANAGER. All rights reserved.</p>
</footer>

<script>
    // Fetch farmer data from backend
    document.addEventListener("DOMContentLoaded", function () {
      const farmerForm = document.getElementById('farmer-form');
      const errorMessage = document.getElementById('error-message');
    
      farmerForm.addEventListener('submit', async function (e) {
        e.preventDefault();
    
        const firstname = document.getElementById('firstname').value;
        const lastname = document.getElementById('lastname').value;
        const age = document.getElementById('age').value;
        const farmLocation = document.getElementById('location').value;
        const productionAmount = document.getElementById('productionAmount').value;
        const loanTaken = document.getElementById('loanTaken').value;
    
        const farmerData = {
          name: `${firstname} ${lastname}`,
          age: age,
          farmLocation: farmLocation,
          productionAmount: productionAmount,
          loanTaken: loanTaken === 'true'
        };
    
        try {
          const response = await fetch('http://localhost:8000/api/farmers', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(farmerData),
          });
    
          if (response.ok) {
          const result = await response.json();
          alert('Farmer registered successfully: ' + result.message);
          window.location.href = '/home'; // Change this line
          } else {
            errorMessage.style.display = 'block';
            errorMessage.textContent = 'Error submitting farmer details';
          }
        } catch (error) {
          console.error('Error:', error);
          errorMessage.style.display = 'block';
          errorMessage.textContent = 'Error submitting farmer details';
        }
      });
    });
    // Fetch farmers on page load
    window.onload = fetchFarmers;
  </script>

  <script>
    function showSection(sectionId) {
      const sections = document.querySelectorAll('.dashboard section');
      sections.forEach(section => section.classList.add('hidden'));
      document.getElementById(sectionId).classList.remove('hidden');
    }

    function showSection(sectionId) {
      const sections = document.querySelectorAll('.dashboard section');
      sections.forEach(section => section.classList.add('hidden'));
      document.getElementById(sectionId).classList.remove('hidden');
    }

    function identifyPest() {
      // Placeholder for pest identification logic
      alert('Pest identification feature coming soon.');
    }
  </script>
  <script>function setupEventListeners() {
    // Field Data Input form submission
    const fieldDataForm = document.querySelector('.field-data-input');
    if (fieldDataForm) {
        fieldDataForm.addEventListener('submit', handleFieldDataFormSubmit);
    } else {
        console.error("Field Data Input form not found.");
    }

    // Pest Management form submission
    const pestManagementForm = document.getElementById('pestManagementForm');
    if (pestManagementForm) {
        pestManagementForm.addEventListener('submit', handlePestManagementFormSubmit);
    } else {
        console.error("The pestManagementForm element is not found.");
    }

    // Toggle Dropdown Menu
    document.querySelector('.settings-button').addEventListener('click', toggleDropdown);

    // Add section switching event listeners
    document.getElementById('homeBtn').addEventListener('click', () => showSection('home'));
    document.getElementById('fieldDataInputBtn').addEventListener('click', () => showSection('fieldDataInput'));
    document.getElementById('pestManagementBtn').addEventListener('click', () => showSection('pestManagement'));
    document.getElementById('farmManagementBtn').addEventListener('click', () => showSection('farmManagement'));
    document.getElementById('cropManualsBtn').addEventListener('click', () => showSection('cropManuals'));
    document.getElementById('settingsBtn').addEventListener('click', () => showSection('settings'));

    // Add event listeners for opening and closing modals
    document.querySelectorAll('.modal .close').forEach(button => {
        button.addEventListener('click', function (event) {
            const modalId = event.target.closest('.modal').id;
            closeModal(modalId);
        });
    });

    document.querySelectorAll('[onclick^="openModal"]').forEach(link => {
        link.addEventListener('click', function (event) {
            const modalId = event.target.getAttribute('onclick').match(/openModal\('([^']+)'\)/)[1];
            openModal(modalId);
        });
    });

    // Logout button
    document.getElementById('logout-button').addEventListener('click', logout);

    // Crop form submission
    document.getElementById('cropForm').addEventListener('submit', handleCropFormSubmit);

    // Add Labour Activity button
    document.getElementById('add-activity-btn').addEventListener('click', addLabourActivity);

    // Calculate Profit or Loss button
    document.querySelector('button[onclick="calculateProfitLoss()"]').addEventListener('click', calculateProfitLoss);

    // Loan management calculations
    document.getElementById('interest-rate').addEventListener('input', calculateLoanInterest);
    document.querySelector('button[onclick="recordPayment()"]').addEventListener('click', recordPayment);
}


// Initialize the application by showing the home section by default 
document.addEventListener('DOMContentLoaded', function() {
    showSection('home'); // Show 'home' section by default
    fetchHistoricalWeatherData(); // Call this function when the page loads

    // Setup event listeners
    setupEventListeners();
});

function setupEventListeners() {
    // Field Data Input form submission
    const fieldDataForm = document.querySelector('.field-data-input');
    if (fieldDataForm) {
        fieldDataForm.addEventListener('submit', handleFieldDataFormSubmit);
    } else {
        console.error("Field Data Input form not found.");
    }

    // Pest Management form submission
    const pestManagementForm = document.getElementById('pestManagementForm');
    if (pestManagementForm) {
        pestManagementForm.addEventListener('submit', handlePestManagementFormSubmit);
    } else {
        console.error("The pestManagementForm element is not found.");
    }

    // Farm Management form submission
    const farmManagementForm = document.getElementById('farmManagementForm');
    if (farmManagementForm) {
        farmManagementForm.addEventListener('submit', handleFarmManagementFormSubmit);
    } else {
        console.error("The farmManagementForm element is not found.");
    }

    // Toggle Dropdown Menu
    document.querySelector('.settings-button').addEventListener('click', toggleDropdown);

    // Add event listeners for opening and closing modals
    document.querySelectorAll('.modal .close').forEach(button => {
        button.addEventListener('click', function (event) {
            const modalId = event.target.closest('.modal').id;
            closeModal(modalId);
        });
    });

    document.querySelectorAll('[onclick^="openModal"]').forEach(link => {
        link.addEventListener('click', function (event) {
            const modalId = event.target.getAttribute('onclick').match(/openModal\('([^']+)'\)/)[1];
            openModal(modalId);
        });
    });

    // Logout button
    document.getElementById('logout-button').addEventListener('click', logout);

    // Crop form submission
    document.getElementById('cropForm').addEventListener('submit', handleCropFormSubmit);

    // Add Labour Activity button
    document.getElementById('add-activity-btn').addEventListener('click', addLabourActivity);

    // Calculate Profit or Loss button
    document.querySelector('button[onclick="calculateProfitLoss()"]').addEventListener('click', calculateProfitLoss);

    // Loan management calculations
    document.getElementById('interest-rate').addEventListener('input', calculateLoanInterest);
    document.querySelector('button[onclick="recordPayment()"]').addEventListener('click', recordPayment);
}

// Function to handle Field Data Input form submission
function handleFieldDataFormSubmit(event) {
    event.preventDefault(); // Prevent the form from submitting
    const formData = gatherFieldData();

    // Basic validation
    if (!validateFieldData(formData)) {
        alert("Please fill in all required fields.");
        return;
    }

    console.log('Field Data Form submitted', formData);
    alert(`Field Data: ${JSON.stringify(formData, null, 2)}`);
    // Reset form
    document.querySelector(".field-data-input").reset();
}

// Gather field data from the form
function gatherFieldData() {
    return {
        cropType: document.getElementById('crop-type').value,
        cropStage: document.getElementById('crop-stage').value,
        nitrogen: document.getElementById('nitrogen').value,
        phosphorus: document.getElementById('phosphorus').value,
        potassium: document.getElementById('potassium').value,
        microNutrients: document.getElementById('micro-nutrients').value,
        interventionUsed: document.getElementById('intervention-used').value,
        quantityUsed: document.getElementById('quantity-used').value,
        weather: document.getElementById('weather').value,
        spacing: document.getElementById('spacing').value
    };
}

// Validate field data input
function validateFieldData(data) {
    return Object.values(data).every(value => value);
}

/// Function to fetch and display weather forecast 
async function getWeatherForecast() {
  const location = document.getElementById('weatherLocation').value;
  if (!location) {
    alert('Please enter a location');
    return;
  }

  try {
    const response = await fetch(`http://localhost:8000/api/weather?location=${location}`);
    if (!response.ok) {
      throw new Error('Failed to fetch weather data');
    }
    const weatherData = await response.json();

    // Get the current date
    const currentDate = new Date(); 
    const options = { year: 'numeric', month: 'long', day: 'numeric' };
    const formattedDate = currentDate.toLocaleDateString(undefined, options); // Format date as needed

    // Display weather data
    document.getElementById('weatherDisplay').innerHTML = `
      <div class="weather-card">
        <h4>Weather in ${weatherData.location}</h4>
        <p><strong>Date:</strong> ${formattedDate}</p>
        <p><strong>Temperature:</strong> ${weatherData.temperature}°C</p>
        <p><strong>Condition:</strong> ${weatherData.description}</p>
        <p><strong>Humidity:</strong> ${weatherData.humidity}%</p>
        <p><strong>Wind Speed:</strong> ${weatherData.wind_speed} m/s</p>
      </div>`;
  } catch (error) {
    console.error('Error fetching weather data:', error);
    alert('Error fetching weather data');
  }
}

// Function to handle Pest Management form submission
function handlePestManagementFormSubmit(event) {
    event.preventDefault(); // Prevent default form submission
    const pestData = gatherPestData();

    // Identify pest/disease before submission
    identifyPestDisease();
    submitPestData(pestData);
}

// Gather pest data from the form
function gatherPestData() {
    return {
        cropName: document.getElementById('pest-crop-type').value,
        cropStage: document.getElementById('pest-crop-stage').value,
        monitoringDetails: document.getElementById('monitoring-details').value,
        preventionStrategies: document.getElementById('prevention-strategies').value,
        interventionUsed: document.getElementById('intervention-used').value,
        dosageRequired: document.getElementById('dosage-required').value,
        effectivenessEvaluation: document.getElementById('effectiveness-evaluation').value,
        futureAdaptation: document.getElementById('future-adaptation').value,
    };
}

// Submit pest data to the server
function submitPestData(pestData) {
    fetch('http://localhost:8000/api/pest-management', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(pestData),
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.json();
    })
    .then(data => {
        console.log('Success:', data);
    })
    .catch((error) => {
        console.error('Error:', error);
    });
}

// Function to identify pest/disease based on user input
function identifyPestDisease() {
    const cropName = document.getElementById("pest-crop-name").value;
    const cropStage = document.getElementById("pest-crop-stage").value;
    const diseaseTypeInput = document.getElementById("pest-disease-name");

    let identifiedPest = '';

    // Simple logic for identifying pests based on crop name and stage
    if (cropName === "maize") {
        if (cropStage === "ep") {
            identifiedPest = "Armyworms";
        } else if (cropStage === "flowering") {
            identifiedPest = "Fall Armyworm";
        }
    } else if (cropName === "beans") {
        if (cropStage === "germination") {
            identifiedPest = "Bean Fly";
        } else if (cropStage === "flowering") {
            identifiedPest = "Spider Mites";
        }
    } else if (cropName === "tomatoes") {
        if (cropStage === "flowering") {
            identifiedPest = "Tomato Hornworm";
        } else if (cropStage === "harvesting") {
            identifiedPest = "Whiteflies";
        }
    } else {
        identifiedPest = "No specific pests identified for the selected crop and stage.";
    }

    // Update the identified pest type in the input field
    diseaseTypeInput.value = identifiedPest;
    alert(`Identified Pest/Disease: ${identifiedPest}`);
}

// Function to handle crop form submission
function handleCropFormSubmit(event) {
    event.preventDefault(); // Prevent the default form submission
    const cropData = {
        name: document.getElementById('cropName').value,
        stage: document.getElementById('cropStage').value,
        // Add any other fields as needed
    };
    submitCropData(cropData);
}

// JavaScript function to submit crop data
function submitCropData(cropData) {
    fetch('/api/crops', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(cropData),
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok ' + response.statusText);
        }
        return response.json();
    })
    .then(data => {
        console.log('Success:', data);
    })
    .catch((error) => {
        console.error('Error:', error);
    });
}

// Function to show the correct section and hide the others
function showSection(sectionId) {
    const sections = document.querySelectorAll('section');
    sections.forEach(section => {
        section.style.display = section.id === sectionId ? 'block' : 'none';
    });
}

// Functions to open and close modals
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'block'; // Show the modal
    }
}

function closeModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
        modal.style.display = 'none'; // Hide the modal
    }
}

// Logout function
function logout() {
    // Perform logout actions
    alert('Logging out...');
    // Redirect to login page or perform logout
}

// Function to calculate profit or loss
function calculateProfitLoss() {
    const revenue = parseFloat(document.getElementById('revenue').value) || 0;
    const expenses = parseFloat(document.getElementById('expenses').value) || 0;
    const profitLoss = revenue - expenses;
    alert(`Profit/Loss: ${profitLoss}`);
}

// Function to calculate loan interest
function calculateLoanInterest() {
    const principal = parseFloat(document.getElementById('loan-amount').value) || 0;
    const interestRate = parseFloat(document.getElementById('interest-rate').value) || 0;
    const duration = parseFloat(document.getElementById('loan-duration').value) || 0;
    const totalInterest = (principal * interestRate * duration) / 100;
    alert(`Total Interest: ${totalInterest}`);
}

// Function to record payment
function recordPayment() {
    const paymentAmount = parseFloat(document.getElementById('payment-amount').value) || 0;
    // Logic to record the payment (not fully implemented)
    alert(`Payment of ${paymentAmount} recorded.`);
}

// Function to add a labour activity
function addLabourActivity() {
    // Logic to add a labour activity (not fully implemented)
    alert('Labour activity added.');
}

// Function to toggle the dropdown menu
function toggleDropdown() {
    const dropdownMenu = document.querySelector('.dropdown-menu');
    if (dropdownMenu) {
        dropdownMenu.classList.toggle('show');
    } else {
        console.error("Dropdown menu not found.");
    }
}
</script>
<script>
// Add this code to the script section in home.html

const fieldDataInputForm = document.querySelector('.field-data-input');

fieldDataInputForm.addEventListener('submit', async function (e) {
    e.preventDefault();
    
    const cropType = document.getElementById('crop-type').value;
    const cropStage = document.getElementById('crop-stage').value;
    const spacing = document.getElementById('spacing').value;
    const nitrogen = document.getElementById('nitrogen').value;
    const phosphorus = document.getElementById('phosphorus').value;
    const potassium = document.getElementById('potassium').value;
    const microNutrients = document.getElementById('micro-nutrients').value;
    const interventionUsed = document.getElementById('intervention-used').value;
    const quantityUsed = document.getElementById('quantity-used').value;
    const weather = document.getElementById('weather').value;

    const fieldData = {
        cropType,
        cropStage,
        spacing,
        nitrogen,
        phosphorus,
        potassium,
        microNutrients,
        interventionUsed,
        quantityUsed,
        weather,
    };

    try {
        const response = await fetch('http://localhost:8000/api/field-data', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(fieldData),
        });

        if (response.ok) {
            const result = await response.json();
            alert('Field data saved successfully: ' + result.message);
            // Optionally reset the form or perform other actions
        } else {
            const errorResult = await response.json();
            alert('Error: ' + errorResult.message);
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Error submitting field data');
    }
});
</script>
<script>
// Add this code to the script section in home.html

const pestManagementForm = document.querySelector('.pest-management');

pestManagementForm.addEventListener('submit', async function (e) {
    e.preventDefault();
    
    const cropType = document.getElementById('pest-crop-type').value;
    const cropStage = document.getElementById('pest-crop-stage').value;
    
    // Handle the file upload
    const pestDiseasePictureInput = document.getElementById('pestDiseasePicture');
    const pestDiseasePicture = await uploadFile(pestDiseasePictureInput.files[0]); // Assume uploadFile is a function to upload the file

    const pestDiseaseType = document.getElementById('pest-disease-type').value;
    const monitoringDetails = document.getElementById('monitoring-details').value;
    const preventionStrategies = document.getElementById('prevention-strategies').value;
    const interventionUsed = document.getElementById('intervention-used').value;
    const dosageRequired = document.getElementById('dosage-required').value;
    const effectivenessEvaluation = document.getElementById('effectiveness-evaluation').value;
    const futureAdaptation = document.getElementById('future-adaptation').value;

    const pestData = {
        cropType,
        cropStage,
        pestDiseasePicture,
        pestDiseaseType,
        monitoringDetails,
        preventionStrategies,
        interventionUsed,
        dosageRequired,
        effectivenessEvaluation,
        futureAdaptation,
    };

    try {
        const response = await fetch('http://localhost:8000/api/pest-management', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(pestData),
        });

        if (response.ok) {
            const result = await response.json();
            alert('Pest management data saved successfully: ' + result.message);
            // Optionally reset the form or perform other actions
        } else {
            const errorResult = await response.json();
            alert('Error: ' + errorResult.message);
        }
    } catch (error) {
        console.error('Error:', error);
        alert('Error submitting pest management data');
    }
});

// Function to handle file upload and return the URL or path
async function uploadFile(file) {
    // Implement the file upload logic (e.g., using FormData and a separate endpoint for uploads)
    // Return the URL or path of the uploaded file
}

// Pest Detection Form Submission
document.getElementById('pest-detection-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      const formData = new FormData();
      const fileInput = document.getElementById('pest-image');

      if (fileInput.files.length === 0) {
        alert('Please upload an image');
        return;
      }

      formData.append('image', fileInput.files[0]);

      try {
        const response = await fetch("http://localhost:8000/api/pestDetection", {
          method: 'POST',
          body: formData,
        });

        const result = await response.json();
        document.getElementById('result').innerText = `Result: ${result.message}, Pest Type: ${result.pestType}`;
      } catch (error) {
        console.error('Error:', error);
        alert('Failed to detect pest');
      }
    });

    // Function to handle file upload
    async function uploadFile(file) {
      const formData = new FormData();
      formData.append('file', file);

      try {
        const response = await fetch("http://localhost:8000/api/upload", {
          method: 'POST',
          body: formData,
        });
        const result = await response.json();
        return result.filePath; // Assuming API returns { filePath: 'path/to/file' }
      } catch (error) {
        console.error('Error uploading file:', error);
        alert('Error uploading file');
        return null;
      }
    }

</script>
<script>
    // Assuming you have an event listener for your form submission 
    const farmManagementForm = document.querySelector('.farm-management');

    farmManagementForm.addEventListener('submit', async function (e) {
        e.preventDefault();

        const cropType = document.getElementById('crop-type').value;
        const cropStage = document.getElementById('crop-stage').value;
        const landArea = document.getElementById('land-area').value;
        const labourActivity = document.getElementById('labour-activity').value;
        const labourCost = document.getElementById('labour-cost').value;
        const mechanicalequipmentUsed = document.getElementById('mechanical-equipment-used').value;
        const inputUsed = document.getElementById('input-used').value;
        const inputCost = document.getElementById('input-cost').value;
        const manHours = document.getElementById('man-hours').value;
        const manHoursCost = document.getElementById('man-hours-cost').value;
        const costProduction = document.getElementById('cost-production').value;
        const marketPrice = document.getElementById('market-price').value;
        const totalUnits = document.getElementById('total-units').value;
        const revenue = calculateRevenue(marketPrice, totalUnits); // Implement this function
        const profitLoss = revenue - costProduction; // Example calculation
        const loanAmount = document.getElementById('loan-amount').value;
        const interestRate = document.getElementById('interest-rate').value;

        const farmData = {
            cropType,
            cropStage,
            landArea,
            labourActivity,
            labourCost,
            equipmentUsed,
            inputUsed,
            inputCost,
            manHours,
            manHoursCost,
            costProduction,
            marketPrice,
            totalUnits,
            revenue,
            profitLoss,
            loanAmount,
            interestRate,
            // Add other fields here
        };

        try {
            const response = await fetch('http://localhost:8000/api/farm-management', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(farmData),
            });

            if (response.ok) {
                const result = await response.json();
                alert('Farm data saved successfully: ' + result.message);
                // Optionally redirect or reset the form
            } else {
                const errorResult = await response.json();
                alert('Error: ' + errorResult.message);
            }
        } catch (error) {
            console.error('Error:', error);
            alert('Error submitting farm data');
        }
    });

    // Example implementation of calculateRevenue function
    function calculateRevenue(marketPrice, totalUnits) {
        return marketPrice * totalUnits; // Adjust as needed
    }
</script>
</body>
</html>
